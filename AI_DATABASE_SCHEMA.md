# üóÑÔ∏è Solao Database Schema for AI

> ‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£ Solao ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ AI ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ

---

## üìç ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô

```yaml
Business: ‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÇ‡∏ã‡∏•‡∏≤‡∏ß (Solao Restaurant)
Type: ‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏µ‡∏™‡∏≤‡∏ô/‡πÑ‡∏ó‡∏¢
Branches:
  - ‡∏Ñ‡∏±‡∏ô‡∏Å‡∏•‡∏≠‡∏á (‡∏™‡∏≤‡∏Ç‡∏≤‡∏´‡∏•‡∏±‡∏Å)
  - ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡πä/‡∏™‡∏±‡∏ô‡∏Å‡∏≥‡πÅ‡∏û‡∏á (‡∏™‡∏≤‡∏Ç‡∏≤‡∏¢‡πà‡∏≠‡∏¢)
Location: ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà, ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢
```

---

## üîó ClickHouse Connection
**‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:** ‡∏´‡πâ‡∏≤‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô ClickHouse ‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î (‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)

```yaml
Database: dedebi
Shop ID: 2OJMVIo1Qi81NqYos3oDPoASziy
Branch IDs:
  - 2PxT0SwTMlORbcER7eaIqi08v4k  # ‡∏Ñ‡∏±‡∏ô‡∏Å‡∏•‡∏≠‡∏á
  - 2PdQF0n9TADAVUEV2dDeqOo7D9N  # ‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡πä
```

---

## üìä Tables

### 1. `productbarcode` - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡πÄ‡∏°‡∏ô‡∏π

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏° ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö

| Column | Type | Description |
|--------|------|-------------|
| `shopid` | String | ‡∏£‡∏´‡∏±‡∏™‡∏£‡πâ‡∏≤‡∏ô (‡πÉ‡∏ä‡πâ filter) |
| `barcode` | String | **PK** ‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ |
| `itemcode` | String | ‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡∏ô |
| `name0` | String | ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡πÄ‡∏°‡∏ô‡∏π |
| `unitname` | String | ‡∏´‡∏ô‡πà‡∏ß‡∏¢ (‡∏à‡∏≤‡∏ô, ‡∏Å‡∏Å., ‡∏ä‡∏¥‡πâ‡∏ô, ‡∏Ç‡∏ß‡∏î) |
| `price1` | Float64 | ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ |
| `groupcode` | String | ‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ |
| `groupnames` | String | ‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ |

**‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏° barcode prefix):**
- `01-xxx` = ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö/‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∏‡∏á
- `02-xxx` = ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ
- `HL0xxx` = ‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (‡∏Ñ‡∏±‡∏ô‡∏Å‡∏•‡∏≠‡∏á)
- `RF0xxx` = ‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (refill/‡πÄ‡∏û‡∏¥‡πà‡∏°)
- `DW0xxx` = ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°
- `DS0xxx` = ‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô
- `PSF0xxx` = ‡πÄ‡∏°‡∏ô‡∏π‡∏û‡∏¥‡πÄ‡∏®‡∏©

**Query ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```sql
-- ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£
SELECT barcode, name0, unitname, price1
FROM dedebi.productbarcode 
WHERE shopid = '2OJMVIo1Qi81NqYos3oDPoASziy'
  AND unitname IN ('‡∏à‡∏≤‡∏ô', '‡∏´‡∏°‡πâ‡∏≠', '‡∏ñ‡πâ‡∏ß‡∏¢', '‡∏ä‡∏∏‡∏î', '‡πÑ‡∏°‡πâ')
  AND name0 NOT LIKE '%‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å%'
```

---

### 2. `doc` - ‡∏´‡∏±‡∏ß‡∏ö‡∏¥‡∏•‡∏Ç‡∏≤‡∏¢

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏¥‡∏•

| Column | Type | Description |
|--------|------|-------------|
| `shopid` | String | ‡∏£‡∏´‡∏±‡∏™‡∏£‡πâ‡∏≤‡∏ô |
| `docno` | String | **PK** ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• |
| `docdatetime` | DateTime | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà/‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≤‡∏¢ |
| `perioddatetime` | DateTime | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏¥‡∏î‡∏£‡∏≠‡∏ö |
| `totalamount` | Float64 | ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ö‡∏¥‡∏• |
| `branchid` | String | ‡∏£‡∏´‡∏±‡∏™‡∏™‡∏≤‡∏Ç‡∏≤ |
| `transflag` | Int16 | **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ö‡∏¥‡∏•** |
| `iscancel` | Bool | ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà |
| `paytype` | Int16 | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞ |
| `deliverycode` | String | ‡∏£‡∏´‡∏±‡∏™ delivery |

**‚ö†Ô∏è ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç - transflag:**
```
transflag = 44  ‚Üí ‡∏Ç‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á (‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
transflag ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‚Üí void, ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å, ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö)
```

**Query ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```sql
-- ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
SELECT 
    toDate(docdatetime) as sale_date,
    count(*) as bill_count,
    sum(totalamount) as total_revenue
FROM dedebi.doc 
WHERE shopid = '2OJMVIo1Qi81NqYos3oDPoASziy'
  AND transflag = 44
  AND docdatetime >= now() - INTERVAL 7 DAY
GROUP BY sale_date
ORDER BY sale_date DESC
```

---

### 3. `docdetail` - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ö‡∏¥‡∏•

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ö‡∏¥‡∏•

| Column | Type | Description |
|--------|------|-------------|
| `shopid` | String | ‡∏£‡∏´‡∏±‡∏™‡∏£‡πâ‡∏≤‡∏ô |
| `docno` | String | ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• (FK ‚Üí doc) |
| `line_number` | UInt32 | ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ |
| `barcode` | String | ‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ |
| `itemname` | String | ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ |
| `qty` | Float64 | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô |
| `price` | Float64 | ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢ |
| `sumamount` | Float64 | ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ |
| `branchid` | String | ‡∏£‡∏´‡∏±‡∏™‡∏™‡∏≤‡∏Ç‡∏≤ |
| `transflag` | Int16 | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ |

**Query ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```sql
-- ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÄ‡∏°‡∏ô‡∏π 30 ‡∏ß‡∏±‡∏ô
SELECT 
    dd.barcode,
    dd.itemname as menu_name,
    sum(dd.qty) as total_qty,
    sum(dd.sumamount) as total_revenue
FROM dedebi.doc d
JOIN dedebi.docdetail dd 
  ON d.shopid = dd.shopid AND d.docno = dd.docno
WHERE d.shopid = '2OJMVIo1Qi81NqYos3oDPoASziy'
  AND d.transflag = 44
  AND d.docdatetime >= now() - INTERVAL 30 DAY
GROUP BY dd.barcode, dd.itemname
ORDER BY total_qty DESC
LIMIT 20
```

---

## üìà Common Queries

### 1. ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
```sql
SELECT 
    sum(totalamount) as today_revenue,
    count(*) as bill_count
FROM dedebi.doc 
WHERE shopid = '2OJMVIo1Qi81NqYos3oDPoASziy'
  AND transflag = 44
  AND toDate(docdatetime) = today()
```

### 2. ‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ Top 10
```sql
SELECT 
    dd.barcode,
    dd.itemname,
    sum(dd.qty) as qty_sold,
    sum(dd.sumamount) as revenue
FROM dedebi.doc d
JOIN dedebi.docdetail dd ON d.shopid = dd.shopid AND d.docno = dd.docno
WHERE d.shopid = '2OJMVIo1Qi81NqYos3oDPoASziy'
  AND d.transflag = 44
  AND d.docdatetime >= now() - INTERVAL 30 DAY
  AND dd.itemname NOT LIKE '%‡∏ô‡πâ‡∏≥%'
  AND dd.itemname NOT LIKE '%‡∏Ç‡πâ‡∏≤‡∏ß%'
GROUP BY dd.barcode, dd.itemname
ORDER BY qty_sold DESC
LIMIT 10
```

### 3. ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÅ‡∏¢‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤
```sql
SELECT 
    CASE d.branchid
        WHEN '2PxT0SwTMlORbcER7eaIqi08v4k' THEN '‡∏Ñ‡∏±‡∏ô‡∏Å‡∏•‡∏≠‡∏á'
        WHEN '2PdQF0n9TADAVUEV2dDeqOo7D9N' THEN '‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏à‡πä'
        ELSE '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'
    END as branch_name,
    sum(d.totalamount) as revenue
FROM dedebi.doc d
WHERE d.shopid = '2OJMVIo1Qi81NqYos3oDPoASziy'
  AND d.transflag = 44
  AND d.docdatetime >= now() - INTERVAL 30 DAY
GROUP BY d.branchid
```

### 4. ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á (‡∏î‡∏π peak time)
```sql
SELECT 
    toHour(docdatetime) as hour,
    count(*) as bill_count,
    sum(totalamount) as revenue
FROM dedebi.doc 
WHERE shopid = '2OJMVIo1Qi81NqYos3oDPoASziy'
  AND transflag = 44
  AND docdatetime >= now() - INTERVAL 7 DAY
GROUP BY hour
ORDER BY hour
```

### 5. ‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÄ‡∏°‡∏ô‡∏π (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö forecast)
```sql
SELECT 
    dd.barcode,
    dd.itemname,
    count(DISTINCT toDate(d.docdatetime)) as days_sold,
    sum(dd.qty) as total_qty,
    round(sum(dd.qty) / count(DISTINCT toDate(d.docdatetime)), 2) as avg_daily
FROM dedebi.doc d
JOIN dedebi.docdetail dd ON d.shopid = dd.shopid AND d.docno = dd.docno
WHERE d.shopid = '2OJMVIo1Qi81NqYos3oDPoASziy'
  AND d.transflag = 44
  AND d.docdatetime >= now() - INTERVAL 30 DAY
GROUP BY dd.barcode, dd.itemname
HAVING total_qty > 30
ORDER BY avg_daily DESC
```

---

## üçΩÔ∏è ‡πÄ‡∏°‡∏ô‡∏π‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏° (30 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)

| Barcode | ‡πÄ‡∏°‡∏ô‡∏π | ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ |
|---------|------|--------|
| HL0014 | ‡∏Ñ‡∏≠‡∏´‡∏°‡∏π‡∏¢‡πà‡∏≤‡∏á | 2,656 |
| HL0009 | ‡∏õ‡∏µ‡∏Å‡πÑ‡∏Å‡πà‡∏ó‡∏≠‡∏î‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤ | 1,870 |
| HL0051 | ‡∏ï‡∏≥‡πÑ‡∏ó‡∏¢ | 1,332 |
| HL0047 | ‡∏ï‡∏≥‡∏õ‡∏π‡∏õ‡∏•‡∏≤‡∏£‡πâ‡∏≤ | 1,155 |
| HL0139 | ‡∏Ç‡∏ô‡∏°‡∏à‡∏µ‡∏ô | 1,027 |
| RF0004 | ‡∏Ñ‡∏≠‡∏´‡∏°‡∏π‡∏¢‡πà‡∏≤‡∏á (refill) | 981 |
| HL0048 | ‡∏ï‡∏≥‡πÇ‡∏ã‡∏•‡∏≤‡∏ß | 875 |
| HL0090 | ‡∏õ‡∏µ‡∏Å‡πÑ‡∏Å‡πà‡∏Ñ‡∏±‡πà‡∏ß‡πÄ‡∏Å‡∏•‡∏∑‡∏≠ | 800 |
| HL0008 | ‡∏õ‡∏•‡∏≤‡∏Å‡∏£‡∏∞‡∏û‡∏á‡∏ó‡∏≠‡∏î‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤ | 709 |
| ALERT1 | ‡πÑ‡∏Å‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏ï‡∏±‡∏ß | 706 |

---

## ü•¨ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö (Ingredients)

| Barcode | ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö | ‡∏´‡∏ô‡πà‡∏ß‡∏¢ |
|---------|---------|-------|
| 01-001 | ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏õ‡∏µ‡πä‡∏ö | ‡∏Å‡∏£‡∏±‡∏° |
| 01-005 | ‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤‡∏à‡∏±‡πà‡∏ô‡πÄ‡∏û‡∏ä‡∏£ | ‡∏°‡∏¥‡∏•‡∏•‡∏¥‡∏•‡∏¥‡∏ï‡∏£ |
| 01-009 | ‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤‡∏£‡πâ‡∏≤ | ‡∏Å‡∏£‡∏±‡∏° |
| 01-020 | ‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡πÑ‡∏ó‡∏¢ | ‡∏Å‡∏£‡∏±‡∏° |
| 01-044 | ‡πÑ‡∏Ç‡πà‡πÑ‡∏Å‡πà | ‡∏ü‡∏≠‡∏á |
| 01-057 | ‡∏Å‡∏£‡∏∞‡πÄ‡∏û‡∏£‡∏≤ | ‡∏Å‡∏£‡∏±‡∏° |
| 01-060 | ‡∏°‡∏∞‡∏ô‡∏≤‡∏ß‡πÅ‡∏õ‡πâ‡∏ô | ‡∏•‡∏π‡∏Å |
| 01-061 | ‡∏Å‡∏∏‡πâ‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠A | ‡∏Å‡∏£‡∏±‡∏° |
| 01-100 | ‡∏õ‡∏•‡∏≤‡∏Å‡∏∞‡∏û‡∏á | ‡∏ï‡∏±‡∏ß |
| 01-101 | ‡∏õ‡∏•‡∏≤‡∏ó‡∏±‡∏ö‡∏ó‡∏¥‡∏°‡πÅ‡∏ö | ‡∏ï‡∏±‡∏ß |

---

## üîß ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏ï‡πä‡∏≠‡∏Å

### ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: ‡∏ú‡∏π‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‚Üí ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö

```
‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÄ‡∏°‡∏ô‡∏π (‡∏à‡∏≤‡∏Å ClickHouse)
        ‚Üì
    √ó ‡∏™‡∏π‡∏ï‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á)
        ‚Üì
= ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ
        ‚Üì
‡∏™‡∏ï‡πä‡∏≠‡∏Å‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ - ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡πÉ‡∏ä‡πâ
        ‚Üì
= ‡∏Ñ‡∏ß‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏π‡∏ï‡∏£

| ‡πÄ‡∏°‡∏ô‡∏π | ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö | ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì/‡∏à‡∏≤‡∏ô |
|------|---------|-----------|
| ‡∏õ‡∏•‡∏≤‡∏Å‡∏£‡∏∞‡∏û‡∏á‡∏ó‡∏≠‡∏î‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤ (HL0008) | ‡∏õ‡∏•‡∏≤‡∏Å‡∏£‡∏∞‡∏û‡∏á | 0.5 ‡∏Å‡∏Å. |
| ‡∏õ‡∏•‡∏≤‡∏Å‡∏£‡∏∞‡∏û‡∏á‡∏ó‡∏≠‡∏î‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤ (HL0008) | ‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏ó‡∏≠‡∏î | 0.1 ‡∏•‡∏¥‡∏ï‡∏£ |
| ‡∏õ‡∏•‡∏≤‡∏Å‡∏£‡∏∞‡∏û‡∏á‡∏ó‡∏≠‡∏î‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤ (HL0008) | ‡πÅ‡∏õ‡πâ‡∏á‡∏ó‡∏≠‡∏î‡∏Å‡∏£‡∏≠‡∏ö | 50 ‡∏Å‡∏£‡∏±‡∏° |
| ‡∏Ñ‡∏≠‡∏´‡∏°‡∏π‡∏¢‡πà‡∏≤‡∏á (HL0014) | ‡∏´‡∏°‡∏π‡∏Ñ‡∏≠ | 0.2 ‡∏Å‡∏Å. |
| ‡∏ï‡∏≥‡πÑ‡∏ó‡∏¢ (HL0051) | ‡∏°‡∏∞‡∏•‡∏∞‡∏Å‡∏≠ | 0.15 ‡∏Å‡∏Å. |
| ‡∏ï‡∏≥‡πÑ‡∏ó‡∏¢ (HL0051) | ‡∏Å‡∏∏‡πâ‡∏á‡πÅ‡∏´‡πâ‡∏á | 20 ‡∏Å‡∏£‡∏±‡∏° |

### ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á

```
‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Ç‡∏≤‡∏¢:
- ‡∏õ‡∏•‡∏≤‡∏Å‡∏£‡∏∞‡∏û‡∏á‡∏ó‡∏≠‡∏î‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤ 19 ‡∏à‡∏≤‡∏ô
- ‡∏™‡∏π‡∏ï‡∏£: 0.5 ‡∏Å‡∏Å./‡∏à‡∏≤‡∏ô

‚Üí ‡πÉ‡∏ä‡πâ‡∏õ‡∏•‡∏≤‡∏Å‡∏£‡∏∞‡∏û‡∏á = 19 √ó 0.5 = 9.5 ‡∏Å‡∏Å.

‡∏™‡∏ï‡πä‡∏≠‡∏Å‡πÄ‡∏î‡∏¥‡∏°: 15 ‡∏Å‡∏Å.
‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: 15 - 9.5 = 5.5 ‡∏Å‡∏Å.

‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢/‡∏ß‡∏±‡∏ô: 8 ‡∏Å‡∏Å.
Safety stock: 5 ‡∏Å‡∏Å.
‡∏ß‡∏±‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏±‡πà‡∏á: 3 ‡∏ß‡∏±‡∏ô

‚Üí ‡∏Ñ‡∏ß‡∏£‡∏™‡∏±‡πà‡∏á = (8 √ó 3 √ó 1.2) - 5.5 + 5 = 28.3 ‚âà 29 ‡∏Å‡∏Å.
```

---

## ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á

1. **‡∏ï‡πâ‡∏≠‡∏á filter `transflag = 44`** ‡πÄ‡∏™‡∏°‡∏≠ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á
2. **‡∏ï‡πâ‡∏≠‡∏á filter `shopid`** ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ database ‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡πâ‡∏≤‡∏ô
3. **‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô ClickHouse ‡πÄ‡∏õ‡πá‡∏ô UTC** - ‡∏ï‡πâ‡∏≠‡∏á +7 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏ó‡∏¢
4. **‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏°‡∏µ "[‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å]"** = ‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏ß‡∏£ filter ‡∏≠‡∏≠‡∏Å

---

## üìû Support

‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏´‡∏£‡∏∑‡∏≠ query ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ñ‡∏≤‡∏°‡πÑ‡∏î‡πâ
